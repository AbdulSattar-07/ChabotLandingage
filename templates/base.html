{% load static %}
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ settings.seo_title|default:"RoyalERP Chatbot" }}</title>
    <meta name="description" content="{{ settings.seo_description|default:'AI-Powered ERP Assistant' }}">

    <!-- Open Graph -->
    <meta property="og:title" content="{{ settings.seo_title }}">
    <meta property="og:description" content="{{ settings.seo_description }}">
    {% if settings.og_image %}
    <meta property="og:image" content="{{ settings.og_image.url }}">{% endif %}

    <!-- Favicon -->
    {% if settings.favicon %}
    <link rel="icon" href="{{ settings.favicon.url }}">{% endif %}

    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '{{ settings.primary_color|default:"#1e3a5f" }}',
                        secondary: '{{ settings.secondary_color|default:"#6366f1" }}',
                        accent: '{{ settings.accent_color|default:"#ec4899" }}',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    {% block extra_css %}{% endblock %}

    <style>
        {
            % block inline_css %
        }

            {
            % endblock %
        }
    </style>
</head>

<body class="font-sans antialiased text-gray-800 bg-white">
    {% block navbar %}{% endblock %}
    <div class="page-wrapper" style="overflow-x: clip; max-width: 100vw;">
    {% block content %}{% endblock %}
    </div>
    {% block extra_js %}{% endblock %}
    
    <!-- Inline JS for immediate interactions -->
    <script>
        // Navbar scroll effect (immediate) - with inline styles for reliability
        (function() {
            const navbar = document.getElementById('navbar');
            const scrollIndicator = document.getElementById('scroll-indicator');
            const socialIcons = document.getElementById('social-icons');
            const heroSection = document.getElementById('hero');
            const heroHeight = heroSection ? heroSection.offsetHeight : window.innerHeight;
            
            // Force navbar to be visible immediately
            if (navbar) {
                navbar.style.cssText = 'position: fixed !important; top: 0 !important; left: 0 !important; right: 0 !important; z-index: 2147483647 !important; visibility: visible !important; opacity: 1 !important; display: block !important;';
            }
            
            // Force scroll indicator visible
            if (scrollIndicator) {
                scrollIndicator.style.cssText = 'display: flex !important; visibility: visible !important; opacity: 1 !important;';
            }
            
            // Force social icons visible
            if (socialIcons) {
                socialIcons.style.cssText = 'display: flex !important; visibility: visible !important; opacity: 1 !important;';
            }
            
            function updateOnScroll() {
                // ALWAYS keep navbar visible
                if (navbar) {
                    navbar.style.visibility = 'visible';
                    navbar.style.opacity = '1';
                    navbar.style.display = 'block';
                    navbar.style.position = 'fixed';
                    navbar.style.zIndex = '2147483647';
                    
                    // Change background on scroll
                    if (window.scrollY > 50) {
                        navbar.classList.add('scrolled', 'navbar-scrolled');
                        navbar.style.background = 'linear-gradient(135deg, #1e3a5f 0%, #6366f1 100%)';
                        navbar.style.boxShadow = '0 4px 30px rgba(0, 0, 0, 0.3)';
                    } else {
                        navbar.classList.remove('scrolled', 'navbar-scrolled');
                        navbar.style.background = 'transparent';
                        navbar.style.boxShadow = 'none';
                    }
                }
                
                // Fade scroll indicator after scrolling
                if (scrollIndicator) {
                    if (window.scrollY > 200) {
                        scrollIndicator.style.opacity = '0';
                        scrollIndicator.style.pointerEvents = 'none';
                    } else {
                        scrollIndicator.style.opacity = '1';
                        scrollIndicator.style.pointerEvents = 'auto';
                    }
                }
                
                // Fade social icons after hero
                if (socialIcons) {
                    if (window.scrollY > heroHeight - 200) {
                        socialIcons.style.opacity = '0';
                        socialIcons.style.pointerEvents = 'none';
                    } else {
                        socialIcons.style.opacity = '1';
                        socialIcons.style.pointerEvents = 'auto';
                    }
                }
            }
            
            // Run on load
            updateOnScroll();
            
            // Run on scroll
            window.addEventListener('scroll', updateOnScroll, { passive: true });
        })();
    </script>
</body>

</html>